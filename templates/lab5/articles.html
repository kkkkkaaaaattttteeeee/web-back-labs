{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 5{% endblock %}

{% block main %}
<div class="articles-container">
    <h1>–ú–æ–∏ —Å—Ç–∞—Ç—å–∏</h1>

    {% if error %}
        <div class="error-message">{{ error }}</div>
    {% endif %}

    {% if not articles %}
        <div class="no-articles">
            <div class="empty-state">
                <h2>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π</h2>
                <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —Å—Ç–∞—Ç—å—é, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –∑–¥–µ—Å—å</p>
                <a href="/lab5/create" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é —Å—Ç–∞—Ç—å—é</a>
            </div>
        </div>
    {% else %}
        <div class="articles-grid">
            {% for article in articles %}
            <div class="article-card">
                <div class="article-header">
                    <h2 class="article-title">
                        {% if article.get %}
                            {{ article.get('title', '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è') }}
                        {% else %}
                            {{ article['title'] if article['title'] else '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è' }}
                        {% endif %}
                    </h2>
                    <div class="article-actions">
                        <a href="/lab5/edit/{{ article['id'] if article.get else article['id'] }}" class="btn btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                        <a href="/lab5/delete/{{ article['id'] if article.get else article['id'] }}" 
                           class="btn btn-delete" 
                           onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ç–∞—Ç—å—é?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                    </div>
                </div>
                <div class="article-content">
                    <p>
                        {% if article.get %}
                            {{ article.get('article_text', '') }}
                        {% else %}
                            {{ article['article_text'] if article['article_text'] else '' }}
                        {% endif %}
                    </p>
                </div>
                <div class="article-footer">
                    <small>ID: {{ article['id'] if article.get else article['id'] }}</small>
                    {% if article.get('created_at') or article['created_at'] %}
                    <small>–°–æ–∑–¥–∞–Ω–æ: 
                        {% if article.get %}
                            {{ article.get('created_at', '') }}
                        {% else %}
                            {{ article['created_at'] if article['created_at'] else '' }}
                        {% endif %}
                    </small>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="action-buttons">
        <a href="/lab5/create" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é</a>
        <a href="/lab5" class="btn btn-secondary">–ù–∞–∑–∞–¥ –∫ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π</a>
    </div>
</div>
{% endblock %}