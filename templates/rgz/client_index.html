{% extends "rgz/base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ö–ª–∏–µ–Ω—Ç{% endblock %}
{% block content %}
<h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ session.user_full_name }}!</h2>
<p>–í–∞—à–∞ —Ä–æ–ª—å: <strong>–ö–ª–∏–µ–Ω—Ç –±–∞–Ω–∫–∞</strong></p>

<div class="card" style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0;">
    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º —Å—á–µ—Ç–µ</h3>
    <p><strong>–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞:</strong> {{ session.user_account }}</p>
    <p><strong>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å:</strong> <span id="balance" style="color: green; font-weight: bold; font-size: 1.2em;">–ó–∞–≥—Ä—É–∑–∫–∞...</span> —Ä—É–±.</p>
</div>

<div class="quick-actions" style="margin-top: 30px;">
    <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
    <div style="display: flex; gap: 20px; margin-top: 15px;">
        <a href="/rgz/transfer" style="background: #28a745; color: white; padding: 12px 24px; border-radius: 5px; text-decoration: none;">
            üì§ –°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥
        </a>
        <a href="/rgz/history" style="background: #007bff; color: white; padding: 12px 24px; border-radius: 5px; text-decoration: none;">
            üìã –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
        </a>
        <a href="/rgz/profile" style="background: #6c757d; color: white; padding: 12px 24px; border-radius: 5px; text-decoration: none;">
            üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
        </a>
    </div>
</div>

<script>
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–ª–∞–Ω—Å
    async function loadBalance() {
        try {
            const result = await apiCall('/rgz/api/user/current');
            if (result.user && result.user.balance) {
                document.getElementById('balance').textContent = result.user.balance.toFixed(2);
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–ª–∞–Ω—Å–∞:', error);
            document.getElementById('balance').textContent = '–û—à–∏–±–∫–∞';
        }
    }
    
    document.addEventListener('DOMContentLoaded', loadBalance);
</script>
{% endblock %}