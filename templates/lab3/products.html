{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 3{% endblock %}

{% block main %}
<h1>–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤</h1>

<form action="/lab3/products">
    <div style="margin-bottom: 20px;">
        <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:</label>
        <input type="number" name="min_price" 
               placeholder="–æ—Ç {{ min_all_price }} —Ä—É–±." 
               value="{{ current_min }}">
        
        <label style="margin-left: 20px;">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:</label>
        <input type="number" name="max_price" 
               placeholder="–¥–æ {{ max_all_price }} —Ä—É–±." 
               value="{{ current_max }}">
    </div>
    
    <div>
        <button type="submit">–ò—Å–∫–∞—Ç—å</button>
        <button type="submit" name="reset" value="1" style="margin-left: 10px;">–°–±—Ä–æ—Å</button>
    </div>
</form>

<hr>

<div style="margin: 20px 0;">
    <strong>–ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: {{ products_count }} –∏–∑ {{ all_products_count }}</strong>
</div>

{% if products_count == 0 %}
    <div style="color: #666; text-align: center; padding: 40px;">
        <h3>üòî –ù–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω</p>
    </div>
{% else %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
        {% for product in products %}
        <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px; background: white;">
            <h3 style="margin-top: 0;">{{ product.name }}</h3>
            <div><strong>–¶–µ–Ω–∞:</strong> {{ product.price }} —Ä—É–±.</div>
            <div><strong>–ë—Ä–µ–Ω–¥:</strong> {{ product.brand }}</div>
            <div><strong>–¶–≤–µ—Ç:</strong> {{ product.color }}</div>
        </div>
        {% endfor %}
    </div>
{% endif %}

<div style="margin-top: 30px;">
    <a href="/lab3/">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü</a>
</div>
{% endblock %}